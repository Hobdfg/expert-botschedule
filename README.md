**Бот-расписание**

Бот основан на платформе Telegram с интеграцией Yandex GPT и SpeechKit. Позволяет организовать неделю любого ученика или студента на основе информации о расписании уроков. При общении с ботом пользователь может написать или отправить голосовое сообщение с информацией о дне недели, времени начала события названии урока. В случае, если отправляется головосое сообщение, то оно преобразовывается в текст с помощью Yendex Speechkit. Полученный запрос передается в Yandex GPT для преобразование в json. Структурированный запрос обрабатывается ботом для формирования расписания пользователя. На основе зарегистрированных расписаний пользователей бот регулярно проверяет начало событий и отправляется напоминания о них. Каждое напоминание сопровождается мотивационным сообщением, которое генерирует Yandex GPT.

Поддерживает следующие команды:\
/start – бот присылает приветственное сообщение\
/help – бот присылает, что он умеет\
/schedule – бот присылает ваше расписание\
/add – добавляет событие в расписание\
/delete – удаляет событие из расписания

Бот работает со скрытыми командами:\
/debug - бот присылает файл с логами\
/stats - бот пришлет статистику израсходованного количества токенов, блоков и зарегистрированных пользователей в проекте

Если происходит ошибка, например не получен ответ от нейросети, то бот сообщает о том, что есть неполадки, а текст ошибки записывается в файл лога

В проекте реализовано хранение информации в базе данных SQLite

**Основные параметры**

Параметры бота сохранены в модуле config.py и в переменных окружения


**Список параметров config.py**\
LOG_FILENAME - имя файла лога\
DATABASE_FILENAME - имя фала базы данных\
URL_CRED - URL через который обновляется IAM-TOKEN для авторизации в API Yandex GPT, Speechkit\
URL_STT - адрес API Speechkit STT\
URL_GPT - адрес API Yandex GPT\
MODEL_NAME - имя GPT модели

MAX_USERS - максимальное количество пользователей на весь проект\
MAX_USER_TOKENS - максимальное количество токенов на сессию\
MAX_PROJECT_TOKENS - максимальное количество токенов на проект\
MAX_MODEL_TOKENS - максимальный размер ответа модели

SYSTEM_PROMPT_SCHEDULE - текст сообщения системного промта к модели для преобразования запроса пользователя в json\
SYSTEM_PROMPT_MOTIVATION - текст сообщения системного промта к модели для генерации мотивационного сообщения пользователя

SUPERUSERS - список администраторов бота не имеющих лимитов

AUDIO_BLOCK - количество секунд в одном блоке\
MAX_USER_STT_BLOCKS - максимальное количество блоков у пользователя\
SCHEDULER_PERIODS - периодичность проверки текущих задач из всех расписаний пользователей для отправки напоминаний и мотивационного сообщения 

**Список параметров переменных окружения**\
IAM_TOKEN - токен авторизации в API Yandex GPT и Speechkit, если не задан, то будет запрашиваться и обновляться автоматически\
FOLDER_ID - идентификатор для доступа к API Yandex GPT, Speechkit\
TELEGRAM_TOKEN - токен телеграм бота


